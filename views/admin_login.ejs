<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>wedecide</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="vendors/mdi/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="vendors/css/vendor.bundle.base.css">
  <link rel="stylesheet" href="/vendor/bootstrap/css/bootstrap.min.css">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <!-- endinject -->
  <!-- Layout styles -->
  <link rel="stylesheet" href="css/style.css">
  <!-- End layout styles -->

</head>

<body>
  <div class="container-scroller">
    <div class="container-fluid page-body-wrapper full-page-wrapper">
      <div class="content-wrapper d-flex align-items-center auth">
        <div class="row flex-grow">
          <div class="col-lg-4 mx-auto">
            <div class="auth-form-light text-left p-5">
              <div class="brand-logo">
              </div>
              <h4>Hello!</h4>
              <h6 class="font-weight-light">Sign in to create an election poll.</h6>
              <form action="/admin" method="post" class="pt-3" onsubmit="submitform();">
                <%- include("message") -%>
                  <div class="form-group">
                    <input required type="text" class="form-control form-control-lg" id="exampleInputEmail1"
                      placeholder="Username" value="<%= formData?.username ?? "" %>" name="username">
                  </div>
                  <div class="form-group">
                    <input required type="password" class="form-control form-control-lg" id="exampleInputPassword1"
                      placeholder="Password" value="<%= formData?.password ?? "" %>" name="password">
                  </div>
                  <div class="form-group">
                    <input type="hidden" name="browserfingerprinting">
                  </div>
                  <div class="mt-3">
                    <button type="submit"
                      class="btn btn-block btn-gradient-primary btn-lg font-weight-medium auth-form-btn">SIGN
                      IN</button>
                  </div>
                  <div class="text-center mt-4 font-weight-light"> Don't have an account? <a href="/register"
                      class="text-primary">Create</a>
                  </div>
            </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- content-wrapper ends -->
  </div>
  <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->

  <!-- Detecting if the page is reach by reloading -->
  <script>
    const pageAccessedByReload = (
      (window.performance.navigation && window.performance.navigation.type === 1) ||
      window.performance
        .getEntriesByType('navigation')
        .map((nav) => nav.type)
        .includes('reload')
    );

    console.info({ pageAccessedByReload })

    if (pageAccessedByReload) console.info({ element: document.querySelector(".error_message.error") });
    // Initialize the agent at application startup.
    const fpPromise = import('https://openfpcdn.io/fingerprintjs/v3')
      .then(FingerprintJS => FingerprintJS.load({ token: "6652d45d51fb6442d5f22470005bccfd" }))

    // Get the visitor identifier when you need it.
    fpPromise
      .then(fp => fp.get())
      .then(result => {
        // This is the visitor identifier:
        const visitorId = result
        console.log({ visitorId })
      })
  </script>
  <!-- plugins:js -->
  <script src="vendors/js/vendor.bundle.base.js"></script>
  <!-- endinject -->
  <!-- Plugin js for this page -->
  <!-- End plugin js for this page -->
  <!-- inject:js -->
  <script src="js/off-canvas.js"></script>
  <script src="js/hoverable-collapse.js"></script>
  <script src="js/misc.js"></script>
  <!-- endinject -->
</body>

</html>